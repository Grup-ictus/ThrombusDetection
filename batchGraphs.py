import os
import shutil

import json
import networkx as nx

databaseDir = "/home/vhir/Documents/dev/populationComparison/Database"
HDPath = "/media/vhir/Disk A/Proces/1a entrega/CTA niftis"
databaseDir = '/home/marc/Desktop/Environment/DatabaseHealthy/'
skip = []
passport = False


testFold0 = ['00296483', '00607702', '10538473', '11045133', '11320307', '11504189', '11617802', '11647786B',
 '11683247', '11745104', '11758848', '11805660', '12028636', '12034417', '12038576', '12177760',
 '12494908', '12690050', '13332291', '13846600', '13902248', '14216239', '14286799', '14513281',
 '14532272', '14775351', '14941502', '14949752', '15308585', '15424020', '16792350', '17060605',
 '17206376', '17209450', '17242791', '17262768', '17342482', '17352895', '17398926', '17450946',
 '17461911', '17482296', '17490602', '17507517', '17530427', '17945801', '19332191', '19421340', '19841496', '19963073']

TH_FAULT = ['12510283', '12514695', '12878665', '16809822', '11504189', '12497312', '14949752', '17198990',
 '00369738', '14140506', '12051491', '13791631', '17461911', '17212718', '17060605', '14374961',
 '12702248', '14152801', '11530724', '17226044', '15421208', '15542636', '14617880', '16655790',
 '12272950', '19841496', '11741558', '19963073', '14798361', '16074666', '12052627', '16792350',
 '17206051', '11857109', '11725660', '11752544', '12177760', '11632845', '17076345', '14741228',
 '17460705', '13073698', '11671843', '19469116', '19751837', '17206376', '12034900', '00237519',
 '11987412', '15957932', '12456568', '16066427', '10538473', '12028636', '11371614', '11617802',
 '12363619', '14062212', '18040803', '12701255', '11218211', '14912947', '17507517', '16589767',
 '14941502', '16871012', '17262768', '11756895', '14002623', '12038576', '14286799', '12494908',
 '12721439', '12799100', '00132083', '16783679', '11414155', '17530427', '19307050', '11611732',
 '17426044', '12690050', '11810234', '00118863', '14065214', '14316053', '16714312', '19895921',
 '19843889', '11320307', '11758848', '15099502', '17713246', '00442501', '15214848', '12301849',
 '11383813', '13569887', '19920737', '11805660', '11384337', '11248789', '15872066', '14775351',
 '11667532', '13291654', '00607702', '11922008', '14180814', '17352895', '11865599', '19421340',
 '17287835', '12212012', '18290089', '14737354', '14702434', '18189722', '13858776', '17442523',
 '15024233', '13662311', '17222325', '16866073', '15424020', '11655974', '14368256', '11413295',
 '11612343', '15068309', '17251179', '13332291', '11045133', '17342482', '12000534']

passport = True
for caseId in [x for x in sorted(os.listdir(databaseDir)) if not x.startswith(".") and x not in skip]:
    # for caseId in sorted(os.listdir()):    
    caseDir = os.path.join(databaseDir, caseId)
   
    casePath = os.path.join(caseDir, caseId + '.nii.gz')
    
    if caseId in TH_FAULT: passport = True # '17625948', '19175439'

    if passport:
        print('Processing case:', '', caseId)        
        os.system(f"xvfb-run --auto-servernum --server-num=1 python3 perform_analysis.py -case_dir {caseDir} --no_display t")
        passport = False
        

      